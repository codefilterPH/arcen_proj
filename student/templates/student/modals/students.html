{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
<style>
  /* === Discord-style clean theme === */
  body, .modal-content {
    background-color: #f2f3f5 !important;
    color: #2c2f33 !important;
    font-family: "Segoe UI", Helvetica, Arial, sans-serif;
  }

  .modal-header, .modal-footer {
    background-color: #ffffff;
    border-color: #e3e5e8;
  }

  .modal-title { color: #2c2f33; font-weight: 600; }

  .form-select, .form-control {
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  .btn { border-radius: 6px; font-weight: 500; }
  .btn-success { background-color: #57f287; color: #2c2f33; border: none; }
  .btn-success:hover { background-color: #4be17c; }
  .btn-refresh { background-color: #5865f2; color: white; border: none; }
  .btn-refresh:hover { background-color: #4752c4; }

  .table { border-radius: 8px; overflow: hidden; border: 1px solid #e3e5e8; }
  .table th { color: #4f545c; font-weight: 600; }
  .table-striped tbody tr:nth-of-type(odd) { background-color: #fafafa; }
  .table-striped tbody tr:hover { background-color: #e3e5e8; }

  .student-photo, .qr-code {
    width: 48px; height: 48px; border-radius: 50%; object-fit: cover;
  }

  .badge { font-size: 0.8rem; padding: 6px 10px; border-radius: 6px; }

  .pagination .page-item.active .page-link {
    background-color: #5865f2;
    border-color: #5865f2;
    color: #fff;
  }

  .pagination .page-link {
    color: #2c2f33;
    border-radius: 6px;
  }

  .pagination .page-link:hover {
    background-color: #e3e5e8;
  }

  /* === Responsive layout tweaks === */
  @media (max-width: 768px) {
    .modal-dialog { margin: 0; width: 100%; }
    .modal-body { padding: 0.75rem; }
    .btn { font-size: 0.9rem; padding: 0.4rem 0.75rem; }
    .table-responsive { overflow-x: auto; }
    .modal-xl.modal-fullscreen-sm-down { width: 100%; margin: 0; }
  }
</style>
{% endblock %}

<!-- ðŸ”¹ Students Modal -->
<div class="modal fade" id="studentsModal" tabindex="-1" aria-labelledby="studentsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-fullscreen-sm-down">
    <div class="modal-content shadow-lg">

      <div class="modal-header">
        <h5 class="modal-title" id="studentsModalLabel">
          <i class="fas fa-user-graduate me-2 text-primary"></i> Students Management
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <!-- ðŸ”¹ Filters -->
        <div class="row align-items-end mb-3 gy-2">
          <div class="col-12 col-md-2">
            <label class="form-label fw-semibold">School Year</label>
            <select class="form-select" id="filterSchoolYear">
              <option value="">All</option>
              <option>2022â€“2023</option>
              <option>2023â€“2024</option>
              <option>2024â€“2025</option>
            </select>
          </div>

          <div class="col-12 col-md-2">
            <label class="form-label fw-semibold">Semester</label>
            <select class="form-select" id="filterSemester">
              <option value="">All</option>
              <option>First Semester</option>
              <option>Second Semester</option>
              <option>Summer Term</option>
            </select>
          </div>

          <div class="col-12 col-md-2">
            <label class="form-label fw-semibold">Flight</label>
            <select class="form-select" id="filterFlight">
              <option value="">All</option>
              <option>Alpha</option>
              <option>Bravo</option>
              <option>Charlie</option>
              <option>Delta</option>
            </select>
          </div>

          <div class="col-12 col-md-3">
            <label class="form-label fw-semibold">Search</label>
            <input type="text" id="filterSearch" class="form-control" placeholder="ðŸ” Search by name or ID">
          </div>

          <div class="col-12 col-md-3 text-md-end text-center">
            <div class="d-flex justify-content-end gap-2 mt-3 mt-md-0">
              <button type="button" class="btn btn-refresh" id="btnRefreshStudents">
                <i class="fas fa-sync-alt me-1"></i> Refresh
              </button>
              <button type="button" class="btn btn-success" id="btnAddStudent"
                      data-bs-toggle="modal" data-bs-target="#addParticipantModal">
                <i class="fas fa-user-plus me-1"></i> Add Student
              </button>
            </div>
          </div>
        </div>

        <!-- ðŸ”¹ Table -->
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle bg-white shadow-sm rounded" id="studentsTable">
            <thead class="table-light">
              <tr>
                <th class="text-center" title="Profile Photo">Image</th>
                <th class="text-center" title="QR Code">QR</th>
                <th title="Student Full Name">Full Name</th>
                <th title="Gender">Gender</th>
                <th title="Birth Date">Birth Date</th>
                <th title="Contact Number">Contact</th>
                <th title="Status">Status</th>
                <th class="text-center" title="Available Actions">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="8" class="text-center text-muted py-3">No students found.</td></tr>
            </tbody>
          </table>
        </div>

        <!-- ðŸ”¹ Pagination Container -->
        <div id="paginationContainerStudents" class="text-center mt-3">

      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-1"></i> Close
        </button>
      </div>

    </div>
  </div>
</div>

{% block extra_js %}
<script src="{% static 'js/student/remove-student.js' %}"></script>
<script src="{% static 'js/student/load-students.js' %}"></script>
<script>
  $(document).ready(function () {
    initStudentsModal();
  });
</script>
{% endblock %}

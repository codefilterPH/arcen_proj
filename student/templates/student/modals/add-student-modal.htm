{% load static %}

<!-- Add Participant Modal -->
<div class="modal fade" id="addParticipantModal" tabindex="-1" aria-labelledby="addParticipantModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content rounded-lg shadow-lg">

      <!-- Header -->
      <div class="modal-header bg-blue-600 text-white rounded-t-lg px-4 py-2 d-flex align-items-center justify-content-between">
        <h5 class="modal-title text-lg fw-semibold d-flex align-items-center gap-2" id="addParticipantModalLabel">
          <i class="fas fa-user-plus text-white text-m"></i>
          Add Student
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Body -->
      <div class="modal-body p-4">

        <!-- ðŸ”¹ Dropdown + Add Button -->
        <div class="mb-4">
          <label for="participantSelect" class="form-label fw-semibold">Select User</label>
          <div class="d-flex align-items-center gap-2">
            <!-- Dropdown -->
            <div class="position-relative flex-grow-1">
              <select id="participantSelect" class="form-select" required>
                <!-- Options loaded dynamically -->
              </select>
              <div id="spinnerParticipant" class="d-none position-absolute end-0 top-50 translate-middle-y me-3">
                <div class="spinner-border text-primary spinner-border-sm"></div>
              </div>
            </div>

            <!-- Add Button -->
            <button type="button" id="btnAddToTable" class="btn btn-success d-flex align-items-center justify-content-center">
              <i class="fas fa-user-plus"></i>
            </button>
          </div>

          <!-- Messages -->
          <p id="participantMessage" class="text-danger small mt-2"></p>
        </div>

        <!-- ðŸ”¹ Selected Participants Table -->
        <div class="mt-4">
          <h6 class="fw-semibold text-dark d-flex align-items-center gap-2">
            <i class="fas fa-users text-primary"></i>
            Selected Participants
          </h6>
          <div class="table-responsive mt-2">
            <table class="table table-sm table-bordered align-middle" id="participantsTable">
              <thead class="table-light">
                <tr>
                  <th class="text-center" style="width: 50px;">#</th>
                  <th>Name</th>
                  <th class="text-center" style="width: 80px;">Action</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      </div>

      <!-- Footer -->
      <div class="modal-footer d-flex justify-content-end bg-light rounded-bottom p-3">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-1"></i> Cancel
        </button>
        <button type="button" id="btnSaveAllParticipants" class="btn btn-primary">
          <i class="fas fa-save me-1"></i> Save All
        </button>
      </div>

    </div>
  </div>
</div>

{% block extra_js %}
<!-- Core JS dependencies -->

<script src="{% static 'js/student/add-students.js' %}"></script>
<script src="{% static 'js/student/actions.js' %}"></script>
<script src="{% static 'js/student/load-users.js' %}"></script>
<script>
  $(document).ready(function() {
    loadUsers();
  });
</script>
{% endblock %}
